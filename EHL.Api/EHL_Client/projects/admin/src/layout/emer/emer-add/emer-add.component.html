<h4 mat-dialog-title>Add EMER</h4>
<form [formGroup]="emerForm" (ngSubmit)="save()">
  <mat-dialog-content>
    <div class="row">
      <div class="col-md-4">
        <mat-form-field>
          <mat-label>EMER Number</mat-label>
          <input formControlName="emerNumber" type="text" matInput placeholder="EMER Number" required />
          <mat-error *ngIf="emerForm.get('emerNumber')?.touched && emerForm.get('emerNumber')?.invalid">
            EMER number is required
          </mat-error>
        </mat-form-field>
      </div>
      <div class="col-md-4">
        <mat-form-field>
          <mat-label>Subject</mat-label>
          <input formControlName="subject" type="text" matInput placeholder="Subject" required />
          <mat-error *ngIf="emerForm.get('subject')?.touched && emerForm.get('subject')?.invalid">
            Subject is required
          </mat-error>
        </mat-form-field>
      </div>
      <div class="col-md-4">
        <mat-form-field>
          <mat-label>Sub Function</mat-label>
          <input formControlName="subFunction" type="text" matInput placeholder="Sub Function" required />
          <mat-error *ngIf="emerForm.get('subFunction')?.touched && emerForm.get('subFunction')?.invalid">
            Sub Function number is required
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <div class="row">
      <div class="col-md-4">
        <mat-form-field appearance="fill">
          <mat-label>Category</mat-label>
          <mat-select [multiple]="false" formControlName="category" (selectionChange)="getSubCategory($event.value)"
            panelClass="custom-dropdown" placeholder="Category" required>
            <mat-option *ngFor="let category of categoryList" [value]="category.id">
              {{ category.name }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="emerForm.get('category')?.touched && emerForm.get('category')?.invalid">
            Category number is required
          </mat-error>
        </mat-form-field>
      </div>
      <div class="col-md-4">
        <mat-form-field appearance="fill">
          <mat-label>Sub Category</mat-label>
          <mat-select [multiple]="false" formControlName="subCategory" panelClass="custom-dropdown"
            (selectionChange)="getEqpt($event.value)" placeholder="Sub-Category" required>
            <mat-option *ngFor="let subCategory of subCategoryList" [value]="subCategory.id">
              {{ subCategory.name }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="emerForm.get('subCategory')?.touched && emerForm.get('subCategory')?.invalid">
            Sub Category number is required
          </mat-error>
        </mat-form-field>
      </div>
      <div class="col-md-4">
        <mat-form-field appearance="fill">
          <mat-label>EQPT</mat-label>
          <mat-select [multiple]="false" formControlName="eqpt" panelClass="custom-dropdown" placeholder="EQPT"
            required>
            <mat-option *ngFor="let eqpt of eqptList" [value]="eqpt.name">
              {{ eqpt.name }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="emerForm.get('eqpt')?.touched && emerForm.get('eqpt')?.invalid">
            EQPT number is required
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <mat-form-field>
          <mat-label>Meta Information</mat-label>
          <textarea matInput formControlName="metaInformation" placeholder="Add meta information" required></textarea>
          <mat-error *ngIf="emerForm.get('metaInformation')?.touched && emerForm.get('metaInformation')?.invalid">
            Meta Information is required
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <div class="row">
      <div class="col-md-4">
        <button mat-raised-button type="button" (click)="fileInput.click()" class="input-btn">Select File</button>
        <input #fileInput type="file" style="display:none" (change)="onFileSelected($event)" accept=".pdf, .doc, .docx, .xls, .xlsx" />
      </div>
      <br>
      <!-- Display file name and file size -->
      <div *ngIf="fileName && fileSizeFormatted">
        <p><strong>File Name:</strong> {{ fileName }}</p>
        <p><strong>File Size:</strong> {{ fileSizeFormatted }}</p>
      </div>
    </div>


  </mat-dialog-content>
  <mat-dialog-actions>
    <button type="button" class="btn btn-sm btn-danger" (click)="reset()">Reset</button>
    <button type="button" class="btn btn-sm btn-warning" (click)="close()">Close</button>
    <button type="submit" class="btn btn-sm btn-primary" >Save</button>
  </mat-dialog-actions>
</form>
